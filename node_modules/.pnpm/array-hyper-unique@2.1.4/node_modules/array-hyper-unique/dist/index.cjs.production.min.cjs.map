{"version":3,"file":"index.cjs.production.min.cjs","sources":["../src/util.ts","../src/index.ts","../src/index.cts"],"sourcesContent":["// @ts-ignore\nimport _equals from 'deep-eql';\nimport { IOptions } from './types';\nimport { findLastIndex, findIndex } from 'lodash';\n\nexport function equals<T>(a1: T, a2: T): boolean\nexport function equals<T>(a1: T, a2: unknown): a2 is T\nexport function equals<T>(a1: unknown, a2: T): a1 is T\nexport function equals(a1: any, a2: any): boolean\n{\n\treturn _equals(a1, a2)\n}\n\nexport function defaultFilter<T>(options: IOptions<T> = {})\n{\n\tconst checker = options.checker || defaultChecker;\n\tconst filter = options.filter || null;\n\n\tconst find = options.removeFromFirst ? findLastIndex : findIndex;\n\n\tconst cb = <K extends any[]>(val: K[keyof K], index: number, arr: K) =>\n\t{\n\t\tlet i = find(arr, a => checker(a, val, arr, arr));\n\t\treturn i === index && (!filter || filter(val));\n\t};\n\n\treturn cb;\n}\n\n// @ts-ignore\nexport function defaultChecker<T, R>(element: T, value: R, arr_new?: Array<T | R>, arr_old?: Array<T | R>): boolean\n{\n\treturn _equals(element, value);\n}\n","import { defaultFilter, equals, defaultChecker } from './util';\n\nimport { IOptions } from './types';\n\nexport * from './types';\nexport * from './util';\n\nexport function array_unique<T>(arr: T, options: IOptions<T> = {}): T\n{\n\tif (!Array.isArray(arr))\n\t{\n\t\tthrow new TypeError(`Expected an Array but got ${typeof arr}.`)\n\t}\n\n\tconst cb = defaultFilter(options);\n\n\tif (options.overwrite)\n\t{\n\t\tlet index = arr.length;\n\n\t\twhile (index--)\n\t\t{\n\t\t\tlet val = arr[index];\n\n\t\t\tif (!cb(val, index, arr))\n\t\t\t{\n\t\t\t\tarr.splice(index, 1);\n\t\t\t}\n\t\t}\n\n\t\treturn arr;\n\t}\n\n\t// @ts-ignore\n\treturn arr.filter(cb);\n}\n\nexport function array_unique_overwrite<T>(arr: T, options: IOptions<T> = {}): T\n{\n\treturn array_unique(arr, {\n\t\t...options,\n\t\toverwrite: true,\n\t});\n}\n\nexport function lazy_unique<T extends any[]>(arr: T): T\nexport function lazy_unique<T, T1, T2>(a1: T1, a2: T2, ...arr: T[]): Array<T | T1 | T2>\nexport function lazy_unique<T>(...arr: Array<T | T[]>): T | (T | T[])[]\n// @ts-ignore\nexport function lazy_unique<T>(...arr: Array<T | T[]>)\n{\n\tif (arr.length > 1)\n\t{\n\t\treturn array_unique(arr);\n\t}\n\n\treturn array_unique(arr[0]);\n}\n\nexport function lazy_unique_overwrite<T>(...arr: Array<T | T[]>)\n{\n\tif (arr.length > 1)\n\t{\n\t\treturn array_unique_overwrite(arr);\n\t}\n\n\treturn array_unique_overwrite(arr[0]);\n}\n\nexport {\n\tequals,\n\tdefaultFilter,\n\tdefaultChecker,\n}\n\nif (process.env.TSDX_FORMAT !== 'esm')\n{\n\tObject.defineProperty(lazy_unique, \"array_unique\", { value: array_unique });\n\tObject.defineProperty(lazy_unique, \"array_unique_overwrite\", { value: array_unique_overwrite });\n\tObject.defineProperty(lazy_unique, \"lazy_unique_overwrite\", { value: lazy_unique_overwrite });\n\n\tObject.defineProperty(lazy_unique, \"equals\", { value: equals });\n\tObject.defineProperty(lazy_unique, \"defaultFilter\", { value: defaultFilter });\n\tObject.defineProperty(lazy_unique, \"defaultChecker\", { value: defaultChecker });\n\n\tObject.defineProperty(lazy_unique, \"lazy_unique\", { value: lazy_unique });\n\tObject.defineProperty(lazy_unique, \"default\", { value: lazy_unique });\n\n\tObject.defineProperty(lazy_unique, \"__esModule\", { value: true });\n}\n\nexport default lazy_unique\n","import { lazy_unique } from './index';\n\n// @ts-ignore\nexport = lazy_unique\n"],"names":["defaultFilter","options","checker","defaultChecker","filter","find","removeFromFirst","findLastIndex","findIndex","val","index","arr","a","element","value","arr_new","arr_old","_equals","array_unique","Array","isArray","TypeError","cb","overwrite","length","splice","array_unique_overwrite","lazy_unique","Object","defineProperty","lazy_unique_overwrite","equals","a1","a2","module","exports"],"mappings":";;;;;;;;;;;;AAagB,SAAAA,cAAiBC,IAAuB;EAEvD,MAAMC,IAAUD,EAAQC,WAAWC,gBAC7BC,IAASH,EAAQG,UAAU,MAE3BC,IAAOJ,EAAQK,kBAAkBC,EAAAA,gBAAgBC,EAAAA;EAQvD,OANW,CAAkBC,GAAiBC,GAAeC,MAEpDN,EAAKM,IAAKC,KAAKV,EAAQU,GAAGH,GAAKE,GAAKA,SAC/BD,OAAWN,KAAUA,EAAOK;AAI3C;;AAGM,SAAUN,eAAqBU,GAAYC,GAAUC,GAAwBC;EAElF,OAAOC,EAAO,QAACJ,GAASC;AACzB;;SC1BgBI,aAAgBP,GAAQV,IAAuB;EAE9D,KAAKkB,MAAMC,QAAQT,IAElB,MAAM,IAAIU,UAAU,oCAAoCV;EAGzD,MAAMW,IAAKtB,cAAcC;EAEzB,IAAIA,EAAQsB,WACZ;IACC,IAAIb,IAAQC,EAAIa;IAEhB,MAAOd,OAIDY,EAFKX,EAAID,IAEDA,GAAOC,MAEnBA,EAAIc,OAAOf,GAAO;IAIpB,OAAOC;AACP;EAGD,OAAOA,EAAIP,OAAOkB;AACnB;;SAEgBI,uBAA0Bf,GAAQV,IAAuB;EAExE,OAAOiB,aAAaP,GAAK;OACrBV;IACHsB,YAAW;;AAEb;;AAMgB,SAAAI,eAAkBhB;EAEjC,OAEQO,aAFJP,EAAIa,SAAS,IAEIb,IAGDA,EAAI;AACzB;;AAoBCiB,OAAOC,eAAeF,aAAa,gBAAgB;EAAEb,OAAOI;IAC5DU,OAAOC,eAAeF,aAAa,0BAA0B;EAAEb,OAAOY;IACtEE,OAAOC,eAAeF,aAAa,yBAAyB;EAAEb,OApB/C,SAAAgB,yBAA4BnB;IAE3C,OAEQe,uBAFJf,EAAIa,SAAS,IAEcb,IAGDA,EAAI;AACnC;IAcCiB,OAAOC,eAAeF,aAAa,UAAU;EAAEb,ODzEhC,SAAAiB,OAAOC,GAASC;IAE/B,OAAOhB,EAAO,QAACe,GAAIC;AACpB;ICuECL,OAAOC,eAAeF,aAAa,iBAAiB;EAAEb,OAAOd;IAC7D4B,OAAOC,eAAeF,aAAa,kBAAkB;EAAEb,OAAOX;IAE9DyB,OAAOC,eAAeF,aAAa,eAAe;EAAEb,OAAOa;IAC3DC,OAAOC,eAAeF,aAAa,WAAW;EAAEb,OAAOa;IAEvDC,OAAOC,eAAeF,aAAa,cAAc;EAAEb,QAAO;ICtF3DoB,OAAAC,UACSR"}